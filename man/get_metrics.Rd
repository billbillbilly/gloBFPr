% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/metrics.R
\name{get_metrics}
\alias{get_metrics}
\alias{get_morphology}
\alias{get_pop_density}
\alias{get_neighbors}
\alias{get_green_acc}
\title{get_metrics}
\usage{
get_morphology(x = NULL)

get_pop_density(x = NULL, year = 2025)

get_neighbors(x = NULL, radius = 500)

get_green_acc(
  x = NULL,
  min_tree_height = 2,
  radius = 800,
  floor = FALSE,
  key = NULL,
  progress_bar = TRUE
)
}
\arguments{
\item{x}{sf. building footprint polygon, typically output from \code{\link[=get_3dglobdf]{get_3dglobdf()}}}

\item{year}{numeric. (only required for \code{get_pop_density}) Year of the GHSL
dataset to use. Must be one of: 1975, 1980, 1985, 1990, 1995, 2000, 2005,
2010, 2015, 2020, 2025, or 2030. Default is 2025.}

\item{radius}{numeric. (only required for \code{get_neighbors} and \code{get_green_acc})
A numeric value specifying the buffer radius (meters) used to define
local neighborhoods and visible area. Default for \code{get_neighbors} and
\code{get_green_acc} is respectfully 500 and 800.}

\item{min_tree_height}{numeric. (only required for \code{get_green_acc})
Minimum height threshold (in meters) to classify vegetation as trees in the CHM.
Default is 2.}

\item{floor}{logical. (only required for \code{get_green_acc}) Whether to compute
Green View Index (GVI) for each floor level based on estimated number of floors.
Default is \code{FALSE}.}

\item{key}{character. (only required for \code{get_green_acc}) API key of OpenTopography.}

\item{progress_bar}{logical. Whether to display progress bar. Default is \code{TRUE}.}
}
\value{
\code{get_morphology} returns an \code{sf} object identical to input \code{x},
with additional columns for:
\itemize{
\item \code{g_area}: Ground area of footprint
\item \code{pmeter}: Perimeter length of footprint
\item \code{v_surf}: Vertical surface area (walls)
\item \code{t_surf}: Total surface area (walls + roof)
\item \code{vol}: Volume (area * height)
\item \code{obb_vol}: Volume of oriented bounding box
\item \code{pa_ratio}: Perimeter-area ratio
\item \code{rec}: Rectangular compactness
\item \code{fra}: Fractal dimension ratio
\item \code{cbn}: Cuboidness index
\item \code{hem}: Hemisphericality index
\item \code{cnv}: Convexity index
\item \code{me_dist}: Mean edge accessibility distance
\item \code{mp_dist}: Mean pairwise distance within the footprint
\item \code{vol_exch}: Volume exchange ratio
\item \code{elo_x/elo_y/elo_z}: Elongation ratios (x/y/z axis)
}

\code{get_pop_density} returns an \code{sf} object identical to input \code{x},
with an added column:
\itemize{
\item \code{pop_den}: Estimated population density (people per 10000m²)
at the centroid of each building polygon.
}

\code{get_neighbors} returns an \code{sf} object identical to input \code{x},
with additional columns for:
\itemize{
\item \code{n_count}: Number of adjacent buildings within the radius.
\item \code{m_ndist}: Mean distance from the building centroid
to neighboring building centroids.
\item \code{sd_ndist}: Standard deviation of those distances.
}

\code{get_neighbors} returns an \code{sf} object identical to input \code{x},
with additional columns for:
\itemize{
\item \code{dng}: Distance to nearest green space (tree canopy pixe)l (in meters).
\item \code{mean_gvi}: Mean Green View Index value (0 to 1) from selected height(s).
\item \code{min_gvi}, \code{max_gvi}, \code{sd_gvi}: Minimum, maximum,
and standard deviation of Green View Index (GVI) (if \code{floor = TRUE}).
\item \code{estimated_floors}: Estimated number of floors based on building height
(if \code{floor = TRUE}).
}
}
\description{
\code{get_morphology}: Computes a set of morphological properties and geometric descriptors for each building footprint polygon.
These include area, perimeter, surface area, volume, shape compactness, elongation, and accessibility measures.

\code{get_pop_density}: Downloads and extracts population density data from the GHSL
(Global Human Settlement Layer) dataset for a specified year, and assigns
population density values to each input building polygon based on its
centroid location.

\code{get_neighbors}: Computes the number of neighboring buildings and their average and standard
deviation of centroid distances, based on a fixed-radius buffer and
Voronoi-based adjacency.

\code{get_green_acc}: Calculate visual and distance accessibility of greenery for each building volume
}
\note{
\code{x} must include a unique \code{id} field.

To request an OpenTopography API token, please visit: \url{https://portal.opentopography.org/requestService?service=api}

USGS 3DEP 1m/10m raster dataset is currently restricted to academic users.
Academic users can request access to these data via the OpenTopography portal.
Non-academic users can enquire about an enterprise API key by emailing info@opentopography.org.
See OpenTopography Terms of Use for more information on appropriate use of the API.
}
\examples{
library(gloBFPr)
data(globfp_example)
result <- gloBFPr::get_morphology(globfp_example[c(1:3),])

result <- gloBFPr::get_pop_density(globfp_example[c(1:3),], year = 2025)


result <- gloBFPr::get_neighbors(globfp_example[c(1:3),], radius = 100)

\donttest{
result <- gloBFPr::get_green_acc(globfp_example[c(1:3),], key = "YOUR_opentopography_API_KEY")
}

}
\references{
Anna Labetski, Stelios Vitalis, Filip Biljecki, Ken Arroyo Ohori &
Jantien Stoter (2023): 3D building metrics for urban morphology.
International Journal of Geographical Information Science, 37(1):
36-67. DOI: 10.1080/13658816.2022.2103818

Rachid Hamaina, Thomas Leduc, Guillaume Moreau.
Towards Urban Fabrics Characterization Based on Buildings Footprints.
Jérôme Gensel; Didier Josselin; Danny Vandenbroucke.
Bridging the Geographic Information Sciences- International AGILE’2012 Conference,
Avignon (France), April, 24-27, 2012, Springer Berlin Heidelberg,
pp.327-346, 2012, 978-3-642-29062-6. 10.1007/978-3-642-290633_18. hal-01347299

Melchiorri, M., Freire, S., Schiavina, M. et al.
The Multi-temporal and Multi-dimensional Global Urban Centre Database to
Delineate and Analyse World Cities. Sci Data 11, 82 (2024).
https://doi.org/10.1038/s41597-023-02691-1
}
